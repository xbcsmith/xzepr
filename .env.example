# XZEPR Server Environment Configuration
# Copy this file to .env and update the values for your environment

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server binding configuration
XZEPR__SERVER__HOST=0.0.0.0
XZEPR__SERVER__PORT=8443
XZEPR__SERVER__ENABLE_HTTPS=true

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL connection string
XZEPR__DATABASE__URL=postgres://xzepr:your-secure-password@postgres:5432/xzepr

# Database credentials (used by docker-compose)
POSTGRES_USER=xzepr
POSTGRES_PASSWORD=your-secure-password
POSTGRES_DB=xzepr

# =============================================================================
# MESSAGING CONFIGURATION (REDPANDA/KAFKA)
# =============================================================================

# Kafka/Redpanda broker addresses
XZEPR__KAFKA__BROKERS=redpanda-0:9092

# Redpanda versions (for docker-compose)
REDPANDA_VERSION=latest
REDPANDA_CONSOLE_VERSION=latest

# =============================================================================
# AUTHENTICATION & AUTHORIZATION
# =============================================================================

# JWT Configuration
XZEPR__AUTH__JWT_SECRET=your-super-secure-jwt-secret-256-bits-minimum-change-this-in-production
XZEPR__AUTH__JWT_EXPIRATION_HOURS=24

# Authentication methods
XZEPR__AUTH__ENABLE_LOCAL_AUTH=true
XZEPR__AUTH__ENABLE_OIDC=false

# Keycloak/OIDC Configuration (if enabled)
XZEPR__AUTH__KEYCLOAK__ISSUER_URL=https://keycloak.example.com/realms/xzepr
XZEPR__AUTH__KEYCLOAK__CLIENT_ID=xzepr-client
XZEPR__AUTH__KEYCLOAK__CLIENT_SECRET=your-keycloak-client-secret
XZEPR__AUTH__KEYCLOAK__REDIRECT_URL=https://xzepr.example.com/auth/callback

# =============================================================================
# TLS/SSL CONFIGURATION
# =============================================================================

# TLS certificate paths (mounted as volumes in container)
XZEPR__TLS__CERT_PATH=/app/certs/cert.pem
XZEPR__TLS__KEY_PATH=/app/certs/key.pem

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Rust logging configuration
RUST_LOG=info,xzepr=debug,sqlx=warn,hyper=info

# Log level options: error, warn, info, debug, trace
# Module-specific logging: module=level,other_module=level

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Prometheus metrics endpoint
XZEPR__METRICS__ENABLED=true
XZEPR__METRICS__PORT=9090

# Grafana admin password (for monitoring stack)
GRAFANA_PASSWORD=admin-change-this

# =============================================================================
# DEVELOPMENT & DEBUGGING
# =============================================================================

# Development mode (DO NOT SET TO TRUE IN PRODUCTION)
XZEPR__DEV_MODE=false

# Enable request/response logging
XZEPR__DEBUG__LOG_REQUESTS=false
XZEPR__DEBUG__LOG_RESPONSES=false

# GraphQL playground (disable in production)
XZEPR__GRAPHQL__PLAYGROUND_ENABLED=false

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Database connection pool settings
XZEPR__DATABASE__MAX_CONNECTIONS=10
XZEPR__DATABASE__MIN_CONNECTIONS=1
XZEPR__DATABASE__ACQUIRE_TIMEOUT=30
XZEPR__DATABASE__IDLE_TIMEOUT=600

# HTTP server settings
XZEPR__SERVER__MAX_CONNECTIONS=1000
XZEPR__SERVER__TIMEOUT=30
XZEPR__SERVER__KEEP_ALIVE=75

# Kafka/Redpanda producer settings
XZEPR__KAFKA__PRODUCER__BATCH_SIZE=16384
XZEPR__KAFKA__PRODUCER__LINGER_MS=5
XZEPR__KAFKA__PRODUCER__RETRIES=3

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# CORS configuration
XZEPR__CORS__ALLOWED_ORIGINS=https://xzepr.example.com,https://app.example.com
XZEPR__CORS__ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
XZEPR__CORS__ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With
XZEPR__CORS__MAX_AGE=3600

# Rate limiting
XZEPR__RATE_LIMIT__REQUESTS_PER_MINUTE=60
XZEPR__RATE_LIMIT__BURST_SIZE=10

# Request size limits
XZEPR__LIMITS__MAX_REQUEST_SIZE=10485760  # 10MB
XZEPR__LIMITS__MAX_JSON_PAYLOAD=1048576   # 1MB

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable/disable specific features
XZEPR__FEATURES__GRAPHQL_ENABLED=true
XZEPR__FEATURES__REST_API_ENABLED=true
XZEPR__FEATURES__WEBSOCKET_ENABLED=true
XZEPR__FEATURES__METRICS_ENABLED=true
XZEPR__FEATURES__HEALTH_CHECK_ENABLED=true

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# External webhook URLs (if applicable)
XZEPR__WEBHOOKS__ENABLED=false
XZEPR__WEBHOOKS__TIMEOUT=30
XZEPR__WEBHOOKS__RETRY_ATTEMPTS=3

# Email service configuration (if applicable)
XZEPR__EMAIL__ENABLED=false
XZEPR__EMAIL__SMTP_HOST=smtp.example.com
XZEPR__EMAIL__SMTP_PORT=587
XZEPR__EMAIL__SMTP_USER=notifications@example.com
XZEPR__EMAIL__SMTP_PASSWORD=your-smtp-password
XZEPR__EMAIL__FROM_ADDRESS=noreply@example.com

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================

# Backup configuration (if applicable)
XZEPR__BACKUP__ENABLED=false
XZEPR__BACKUP__INTERVAL=24h
XZEPR__BACKUP__RETENTION_DAYS=30
XZEPR__BACKUP__S3_BUCKET=xzepr-backups
XZEPR__BACKUP__S3_REGION=us-east-1

# =============================================================================
# ENVIRONMENT IDENTIFICATION
# =============================================================================

# Environment identifier
ENVIRONMENT=production
DEPLOYMENT_VERSION=1.0.0
SERVICE_NAME=xzepr
